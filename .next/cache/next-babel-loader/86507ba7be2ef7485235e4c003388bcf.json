{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport Typography from 'antd/lib/typography';\nimport Link from 'next/link';\nimport { ValidateEmail } from \"../../../core/validations/email\";\nimport axios from 'axios';\nimport { Config } from \"../../../core/config\";\nimport message from 'antd/lib/message';\nimport Button from '@atlaskit/button';\nimport Form, { ErrorMessage, Field, FormFooter } from '@atlaskit/form';\nimport Textfield from '@atlaskit/textfield';\nimport * as styles from \"./styles\";\nconst {\n  Title\n} = Typography;\n\nconst errorNotification = m => {\n  message.error({\n    duration: 4,\n    content: m,\n    style: {\n      marginTop: '100px'\n    }\n  });\n};\n\nconst successNotification = m => {\n  message.success({\n    duration: 4,\n    content: m,\n    style: {\n      marginTop: '100px'\n    }\n  });\n}; // eslint-disable-next-line import/no-anonymous-default-export\n\n\nexport default class extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"handleSubmit\", () => {\n      const {\n        authenticate,\n        router\n      } = this.props;\n      const {\n        email\n      } = this.state;\n\n      if (!ValidateEmail(email)) {\n        this.setState({\n          valid: false\n        });\n        return;\n      }\n\n      axios.post(`${Config().ServiceURI}login`, {\n        Email: email\n      }).then(res => {\n        const {\n          status,\n          data\n        } = res;\n\n        if (data !== undefined && status === 200) {\n          successNotification(`A login link has been successfully sent on the email address ${email}. `);\n        } else {\n          errorNotification(data.Error);\n        }\n      }).catch(() => {\n        console.log(e);\n        errorNotification('Something went wrong, please try again');\n      });\n    });\n\n    _defineProperty(this, \"onChange\", e => {\n      this.setState({\n        email: e.target.value\n      });\n    });\n\n    this.state = {\n      email: '',\n      valid: true\n    };\n  }\n\n  render() {\n    const {\n      email,\n      valid\n    } = this.state;\n    return __jsx(styles.Root, null, __jsx(Form, {\n      onSubmit: this.handleSubmit\n    }, ({\n      formProps\n    }) => __jsx(\"form\", _extends({}, formProps, {\n      name: \"validation-example\"\n    }), __jsx(Field, {\n      label: \"Work Email\",\n      isRequired: true,\n      name: \"work-email\",\n      defaultValue: \"\"\n    }, ({\n      fieldProps\n    }) => __jsx(React.Fragment, null, __jsx(Textfield, _extends({}, fieldProps, {\n      value: email,\n      onChange: this.onChange\n    })), !valid && __jsx(ErrorMessage, null, \"Incorrect email address\"))), __jsx(FormFooter, null, __jsx(Button, {\n      style: {\n        height: '40px'\n      },\n      shouldFitContainer: true,\n      type: \"submit\",\n      appearance: \"primary\",\n      onClick: () => {\n        this.handleSubmit();\n      }\n    }, \"Login\")))), __jsx(Title, {\n      level: 5,\n      style: {\n        marginTop: '20px',\n        fontWeight: 500,\n        textAlign: 'center'\n      }\n    }, \"Don't have an account?\", ' ', __jsx(Link, {\n      href: \"/signup\"\n    }, __jsx(\"a\", {\n      href: \"/signup\"\n    }, \"Register\"))));\n  }\n\n}","map":{"version":3,"sources":["/home/ubuntu/go/src/github.com/jobbox-tech/recruiter-ui/src/Containers/Login/Form/index.tsx"],"names":["React","Component","Typography","Link","ValidateEmail","axios","Config","message","Button","Form","ErrorMessage","Field","FormFooter","Textfield","styles","Title","errorNotification","m","error","duration","content","style","marginTop","successNotification","success","constructor","props","authenticate","router","email","state","setState","valid","post","ServiceURI","Email","then","res","status","data","undefined","Error","catch","console","log","e","target","value","render","handleSubmit","formProps","fieldProps","onChange","height","fontWeight","textAlign"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Typography from 'antd/lib/typography';\nimport Link from 'next/link';\nimport { NextRouter } from 'next/router';\nimport { ValidateEmail } from '@/core/validations/email';\nimport axios from 'axios';\nimport { Config } from '@/core/config';\nimport message from 'antd/lib/message';\n\nimport Button from '@atlaskit/button';\nimport Form, { ErrorMessage, Field, FormFooter } from '@atlaskit/form';\n\nimport Textfield from '@atlaskit/textfield';\nimport * as styles from './styles';\n\nconst { Title } = Typography;\n\ntype Props = {\n  router: NextRouter;\n  authenticate: any;\n};\n\ntype State = {\n  email: string;\n  valid: boolean;\n};\n\nconst errorNotification = (m: string): void => {\n  message.error({\n    duration: 4,\n    content: m,\n    style: {\n      marginTop: '100px',\n    },\n  });\n};\n\nconst successNotification = (m): void => {\n  message.success({\n    duration: 4,\n    content: m,\n    style: {\n      marginTop: '100px',\n    },\n  });\n};\n\n// eslint-disable-next-line import/no-anonymous-default-export\nexport default class extends Component<Props, State> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: '',\n      valid: true,\n    };\n  }\n\n  handleSubmit = (): void => {\n    const { authenticate, router } = this.props;\n    const { email } = this.state;\n    if (!ValidateEmail(email)) {\n      this.setState({ valid: false });\n      return;\n    }\n\n    axios\n      .post(`${Config().ServiceURI}login`, {\n        Email: email,\n      })\n      .then(res => {\n        const { status, data } = res;\n        if (data !== undefined && status === 200) {\n          successNotification(\n            `A login link has been successfully sent on the email address ${email}. `,\n          );\n        } else {\n          errorNotification(data.Error);\n        }\n      })\n      .catch(() => {\n        console.log(e);\n        errorNotification('Something went wrong, please try again');\n      });\n  };\n\n  onChange = (e: { target: HTMLInputElement }): void => {\n    this.setState({\n      email: e.target.value,\n    });\n  };\n\n  render(): any {\n    const { email, valid } = this.state;\n    return (\n      <styles.Root>\n        <Form onSubmit={this.handleSubmit}>\n          {({ formProps }) => (\n            <form {...formProps} name=\"validation-example\">\n              <Field\n                label=\"Work Email\"\n                isRequired\n                name=\"work-email\"\n                defaultValue=\"\"\n              >\n                {({ fieldProps }: any) => (\n                  <>\n                    <Textfield\n                      {...fieldProps}\n                      value={email}\n                      onChange={this.onChange}\n                    />\n                    {!valid && (\n                      <ErrorMessage>Incorrect email address</ErrorMessage>\n                    )}\n                  </>\n                )}\n              </Field>\n              <FormFooter>\n                <Button\n                  style={{ height: '40px' }}\n                  shouldFitContainer\n                  type=\"submit\"\n                  appearance=\"primary\"\n                  onClick={() => {\n                    this.handleSubmit();\n                  }}\n                >\n                  Login\n                </Button>\n              </FormFooter>\n            </form>\n          )}\n        </Form>\n        <Title\n          level={5}\n          style={{\n            marginTop: '20px',\n            fontWeight: 500,\n            textAlign: 'center',\n          }}\n        >\n          Don&apos;t have an account?{' '}\n          <Link href=\"/signup\">\n            <a href=\"/signup\">Register</a>\n          </Link>\n        </Title>\n      </styles.Root>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}