{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport App from 'next/app';\nimport Cookies from 'universal-cookie';\nimport \"../core/Theme/antd.less\";\nimport \"../core/Theme/base\";\nimport { createGlobalStyle, ThemeProvider } from 'styled-components';\nimport axios from 'axios';\nimport { Config } from \"../core/config\";\nimport { AuthProvider } from \"../core/Components/Providers/AuthProvider\";\nconst GlobalStyle = createGlobalStyle``;\nconst theme = {};\n\nclass MyApp extends App {\n  render() {\n    const {\n      Component,\n      pageProps,\n      authenticated\n    } = this.props;\n    return __jsx(\"div\", null, __jsx(GlobalStyle, null), __jsx(ThemeProvider, {\n      theme: theme\n    }, __jsx(AuthProvider, {\n      authenticated: authenticated\n    }, __jsx(Component, pageProps))));\n  }\n\n}\n\nMyApp.getInitialProps = async appContext => {\n  let authenticated = false;\n  const request = appContext.ctx.req;\n\n  if (request) {\n    const cookies = new Cookies(request.headers.cookie || '');\n    request.cookies = cookies.getAll() || {};\n    authenticated = !!request.cookies.session;\n  } // TODO  Do the Cookie Validation here via API call\n  // Call the page's `getInitialProps` and fill `appProps.pageProps`\n\n\n  const appProps = await App.getInitialProps(appContext);\n  return _objectSpread(_objectSpread({}, appProps), {}, {\n    authenticated\n  });\n};\n\nexport default MyApp;\n\nasync function authenticate(token) {\n  // axios.post(\n  //   'https://httpbin.org/post',\n  //   { hello: 'world' },\n  //   {\n  //     headers: {\n  //       'Test-Header': 'test-value',\n  //     },\n  //   },\n  // );\n  axios.post(`${Config().ServiceURI}/login`, {}, {\n    headers: {\n      'Test-Header': 'test-value'\n    }\n  }).then(res => {\n    const {\n      status,\n      data\n    } = res;\n\n    if (data !== undefined && status === 200) {\n      successNotification(`A login link has been successfully sent on the email address ${email}. Please click on the link to proceed. `);\n      this.setState({\n        email: ''\n      });\n    } else {\n      errorNotification(data.Error);\n    }\n  }); //   .catch(error => {\n  //     const { response } = error;\n  //     if (response !== undefined && response.data !== undefined) {\n  //       errorNotification(response.data.Error);\n  //     } else {\n  //       errorNotification('Something went wrong, please try again');\n  //     }\n  //   });\n\n  return false;\n}","map":{"version":3,"sources":["/home/ubuntu/go/src/github.com/jobbox-tech/recruiter-ui/src/pages/_app.tsx"],"names":["React","App","Cookies","createGlobalStyle","ThemeProvider","axios","Config","AuthProvider","GlobalStyle","theme","MyApp","render","Component","pageProps","authenticated","props","getInitialProps","appContext","request","ctx","req","cookies","headers","cookie","getAll","session","appProps","authenticate","token","post","ServiceURI","then","res","status","data","undefined","successNotification","email","setState","errorNotification","Error"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,MAAoC,OAApC;AACA,OAAOC,GAAP,MAAqC,UAArC;AACA,OAAOC,OAAP,MAAoB,kBAApB;AACA;AACA;AACA,SAASC,iBAAT,EAA4BC,aAA5B,QAAiD,mBAAjD;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,MAAT;AAGA,SAASC,YAAT;AAEA,MAAMC,WAAW,GAAGL,iBAAkB,EAAtC;AACA,MAAMM,KAAK,GAAG,EAAd;;AAMA,MAAMC,KAAN,SAAoBT,GAApB,CAAkC;AAChCU,EAAAA,MAAM,GAAiB;AACrB,UAAM;AAAEC,MAAAA,SAAF;AAAaC,MAAAA,SAAb;AAAwBC,MAAAA;AAAxB,QAA0C,KAAKC,KAArD;AACA,WACE,mBACE,MAAC,WAAD,OADF,EAEE,MAAC,aAAD;AAAe,MAAA,KAAK,EAAEN;AAAtB,OACE,MAAC,YAAD;AAAc,MAAA,aAAa,EAAEK;AAA7B,OACE,MAAC,SAAD,EAAeD,SAAf,CADF,CADF,CAFF,CADF;AAUD;;AAb+B;;AAgBlCH,KAAK,CAACM,eAAN,GAAwB,MACtBC,UADsB,IAEkB;AACxC,MAAIH,aAAa,GAAG,KAApB;AACA,QAAMI,OAAO,GAAGD,UAAU,CAACE,GAAX,CAAeC,GAA/B;;AACA,MAAIF,OAAJ,EAAa;AACX,UAAMG,OAAO,GAAG,IAAInB,OAAJ,CAAYgB,OAAO,CAACI,OAAR,CAAgBC,MAAhB,IAA0B,EAAtC,CAAhB;AACAL,IAAAA,OAAO,CAACG,OAAR,GAAkBA,OAAO,CAACG,MAAR,MAAoB,EAAtC;AAEAV,IAAAA,aAAa,GAAG,CAAC,CAACI,OAAO,CAACG,OAAR,CAAgBI,OAAlC;AACD,GARuC,CAUxC;AAEA;;;AACA,QAAMC,QAAQ,GAAG,MAAMzB,GAAG,CAACe,eAAJ,CAAoBC,UAApB,CAAvB;AACA,yCAAYS,QAAZ;AAAsBZ,IAAAA;AAAtB;AACD,CAjBD;;AAmBA,eAAeJ,KAAf;;AAEA,eAAeiB,YAAf,CAA4BC,KAA5B,EAAoD;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEAvB,EAAAA,KAAK,CACFwB,IADH,CAEK,GAAEvB,MAAM,GAAGwB,UAAW,QAF3B,EAGI,EAHJ,EAII;AACER,IAAAA,OAAO,EAAE;AACP,qBAAe;AADR;AADX,GAJJ,EAUGS,IAVH,CAUQC,GAAG,IAAI;AACX,UAAM;AAAEC,MAAAA,MAAF;AAAUC,MAAAA;AAAV,QAAmBF,GAAzB;;AACA,QAAIE,IAAI,KAAKC,SAAT,IAAsBF,MAAM,KAAK,GAArC,EAA0C;AACxCG,MAAAA,mBAAmB,CAChB,gEAA+DC,KAAM,yCADrD,CAAnB;AAGA,WAAKC,QAAL,CAAc;AAAED,QAAAA,KAAK,EAAE;AAAT,OAAd;AACD,KALD,MAKO;AACLE,MAAAA,iBAAiB,CAACL,IAAI,CAACM,KAAN,CAAjB;AACD;AACF,GApBH,EAXkD,CAgClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAAO,KAAP;AACD","sourcesContent":["import React, { ReactElement } from 'react';\nimport App, { AppInitialProps } from 'next/app';\nimport Cookies from 'universal-cookie';\nimport '@/core/Theme/antd.less';\nimport '@/core/Theme/base';\nimport { createGlobalStyle, ThemeProvider } from 'styled-components';\nimport axios from 'axios';\nimport { Config } from '@/core/config';\n\nimport { CookieMessage } from '@/core/types/index.d';\nimport { AuthProvider } from '@/core/Components/Providers/AuthProvider';\n\nconst GlobalStyle = createGlobalStyle``;\nconst theme = {};\n\ntype AppProps = {\n  authenticated: boolean;\n};\n\nclass MyApp extends App<AppProps> {\n  render(): ReactElement {\n    const { Component, pageProps, authenticated } = this.props;\n    return (\n      <div>\n        <GlobalStyle />\n        <ThemeProvider theme={theme}>\n          <AuthProvider authenticated={authenticated}>\n            <Component {...pageProps} />\n          </AuthProvider>\n        </ThemeProvider>\n      </div>\n    );\n  }\n}\n\nMyApp.getInitialProps = async (\n  appContext,\n): Promise<AppInitialProps & AppProps> => {\n  let authenticated = false;\n  const request = appContext.ctx.req as CookieMessage;\n  if (request) {\n    const cookies = new Cookies(request.headers.cookie || '');\n    request.cookies = cookies.getAll() || {};\n\n    authenticated = !!request.cookies.session;\n  }\n\n  // TODO  Do the Cookie Validation here via API call\n\n  // Call the page's `getInitialProps` and fill `appProps.pageProps`\n  const appProps = await App.getInitialProps(appContext);\n  return { ...appProps, authenticated };\n};\n\nexport default MyApp;\n\nasync function authenticate(token: string): boolean {\n  // axios.post(\n  //   'https://httpbin.org/post',\n  //   { hello: 'world' },\n  //   {\n  //     headers: {\n  //       'Test-Header': 'test-value',\n  //     },\n  //   },\n  // );\n\n  axios\n    .post(\n      `${Config().ServiceURI}/login`,\n      {},\n      {\n        headers: {\n          'Test-Header': 'test-value',\n        },\n      },\n    )\n    .then(res => {\n      const { status, data } = res;\n      if (data !== undefined && status === 200) {\n        successNotification(\n          `A login link has been successfully sent on the email address ${email}. Please click on the link to proceed. `,\n        );\n        this.setState({ email: '' });\n      } else {\n        errorNotification(data.Error);\n      }\n    });\n  //   .catch(error => {\n  //     const { response } = error;\n  //     if (response !== undefined && response.data !== undefined) {\n  //       errorNotification(response.data.Error);\n  //     } else {\n  //       errorNotification('Something went wrong, please try again');\n  //     }\n  //   });\n  return false;\n}\n"]},"metadata":{},"sourceType":"module"}